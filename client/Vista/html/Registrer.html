<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="../image/logo-vt.svg" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"
        integrity="sha512-lbwH47l/tPXJYG9AcFNoJaTMhGvYWhVM9YI43CT+uteTRRaiLCui8snIgyAN8XWgNjNhCqlAUdzZptso6OCoFQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css"
        integrity="sha512-6S2HWzVFxruDlZxI3sXOZZ4/eJ8AcxkQH1+JjSe/ONCEqR9L4Ysq5JdT5ipqtzU7WHalNwzwBv+iE51gNHJNqQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body class="bg-info d-flex justify-content-center align-items-center">
    <div class="bg-white p-5 rounded-5 text-secondary shadow" style="width: 35rem">
        <h1>Registro de Usuario</h1>
        <form action="?" method="post">
            <div class="mb-4">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control bg-light" id="nombre" name="nombre" required />
            </div>

            <div class="mb-4">
                <label for="tipoDocumento" class="form-label">Tipo de
                    documento</label>
                <select class="form-select bg-light" id="tipoDocumento" name="tipoDocumento" required>
                    <option value>Seleccione...</option>
                    <option value="1">Cédula</option>
                    <option value="2">Tarjeta Identidad</option>
                </select>
            </div>
            <div class="mb-4">
                <label for="numeroDocumento" class="form-label">Número de
                    documento</label>
                <input type="text" class="form-control bg-light" id="numeroDocumento" name="numeroDocumento" required />
            </div>
            <div class="mb-4">
                <label for="numeroCelular" class="form-label">Número de celular</label>
                <input type="text" class="form-control bg-light" inputmode="numeric" pattern="\d*" id="numeroCelular" name="numeroCelular" required />
            </div>
            <div class="mb-4">
                <label for="correo" class="form-label">Correo electrónico</label>
                <input type="email" class="form-control bg-light" id="correo" name="correo" required>
            </div>
            <div class="mb-4">
                <label for="contraseña" class="form-label">Contraseña</label>
                <input type="password" class="form-control bg-light" id="contraseña" name="contraseña" required>
            </div>
            <div class="mb-4">
                <label for="rcontraseña" class="form-label"> Repite la Contraseña</label>
                <input type="password" class="form-control bg-light" id="rcontraseña" name="rcontraseña" required>
            </div>
            <div class="mb-4">
                <label for="direccion" class="form-label">Dirección</label>
                <input type="text" class="form-control bg-light" id="direccion" name="dirección" required>
            </div>
            <div class="mb-4">
                <label for="saldo" class="form-label">Saldo</label>
                <input type="number" class="form-control bg-light" inputmode="numeric" pattern="\d*" id="saldo" name="saldo" required>
            </div>
            <div class="mb-4">
                <label for="tipoPerfil" class="form-label">Tipo de
                    Perfil</label>
                <select class="form-select bg-light" id="tipoPerfil" name="tipoPerfil" required>
                    <option value>Seleccione...</option>
                    <option value="Admin">Administrador</option>
                    <option value="Usuario">Cliente</option>
                </select>
            </div>

            <div class="mb-4">
                <label for="Estadocuenta" class="form-label">Estado cuenta</label>
                <select class="form-select bg-light" id="Estadocuenta" name="Estadocuenta" required>
                    <option value>Seleccione...</option>
                    <option value="true">Activo</option>
                    <option value="false">Inactivo</option>
                </select>
            </div>


            <button onclick="registro(event)" class="btn btn-info text-white w-100 mt-4 fw-semibold shadow-sm">Crear
                Usuario</button>
        </form>
        <div class="d-flex gap-1 justify-content-center mt-1">
            <a href="./login.html" class="text-decoration-none text-info fw-semibold">Cancelar</a>
        </div>
    </div>
</body>

<script>
    function registro(event) {
        event.preventDefault();
        var nombre = document.getElementById("nombre").value
        var tipoDocumento = document.getElementById("tipoDocumento").value
        var numeroDocumento = document.getElementById("numeroDocumento").value
        var numeroCelular = document.getElementById("numeroCelular").value
        var correo = document.getElementById("correo").value
        var rcontraseña = document.getElementById("rcontraseña").value
        var direccion = document.getElementById("direccion").value
        var saldo = document.getElementById("saldo").value
        var tipoPerfil = document.getElementById("tipoPerfil").value
        var Estadocuenta = document.getElementById("Estadocuenta").value



        if (nombre.length < 1) {
            toastr.error("Debe llenar todos los campos para registrarse");
        }

        const formData={
             NOMBRE_USUARIO : nombre,
			 DOCUMENTO : numeroDocumento,
             TIPO_DOCUMENTO : tipoDocumento,
			 NUMERO_CELULAR : numeroCelular,
			 CORREO : correo,
             PASSWORD : rcontraseña,
             DIRECCION : direccion,
             SALDO : saldo,
             ESTADO_CUENTA : Estadocuenta,
             PERFIL : tipoPerfil

         }   

         fetch('https://f114-191-156-177-68.ngrok-free.app/user/crearUsuario', 
         {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json' 
            },
            body: JSON.stringify(formData)
        })
        .then(res => {
            return res.json();
        })
        .then(data => {
        console.log("Respuesta exitosa", data);
        })
             .catch(err => console.log(formData, err))
    }

</script>

</html>